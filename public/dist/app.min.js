"use strict";angular.module("app.controllers",[]),angular.module("app.directives",[]),angular.module("app.filters",[]),angular.module("app.models",[]),angular.module("app.services",[]),angular.module("app.routes",[]),angular.module("app.templates",[]),angular.module("app",["ngResource","ngSanitize","ui.router","app.controllers","app.directives","app.filters","app.models","app.services","app.routes","app.templates"]),angular.element(document).ready(function(){angular.bootstrap(document,["app"])});
"use strict";angular.module("app.routes").run(["$rootScope","$state",function(t,a){t.$on("$stateChangeStart",function(t,a,e){if(a.data){a.data.requireLogin}})}]);
"use strict";angular.module("app.routes").config(["$stateProvider","$urlRouterProvider",function(r,e){e.otherwise("/"),r.state("main",{url:"/",templateUrl:"views/main.html",controller:"mainCtrl",data:{requireLogin:!1}})}]);
"use strict";angular.module("app.controllers").controller("mainCtrl",["$scope","$http","$syntax","$timeout","$loader","$socket",function(n,e,t,o,i,c){function l(){e.get("/api/files").success(function(e){n.files=e})}function s(o){var i=o.name.split(".");e.post("/api/get_file",{path:o.path}).success(function(e){"jpg"==i[i.length-1]||"gif"==i[i.length-1]||"png"==i[i.length-1]||"svg"==i[i.length-1]?(o.imageurl="http://localhost:3333/"+o.shortpath.replace(/\s/g,"%20"),n.currentFile=o,n.syntax=""):(n.currentFile=o,"string"==typeof e?n.fileContent=e:n.fileContent=JSON.stringify(e,null,4),n.syntax=t(o.name))})}function a(e,t){_.find(t,function(t){"directory"==t.type?a(e,t.files):t.path==e&&n.changingFuncs.change(t)})}n.pageTitle="File Watcher",n.currentFile={},n.fileContent="",n.syntax="",n.files={},n.changed=[],n.opened=[],n.openFiles=[],n.openingFuncs={isOpen:function(e){return _.indexOf(n.opened,e.path)!=-1},open:function(e){n.opened.push(e.path)},close:function(e){_.remove(n.opened,function(n){return e.path==n})},toggle:function(e){n.openingFuncs.isOpen(e)?n.openingFuncs.close(e):n.openingFuncs.open(e)}},n.changingFuncs={isChanged:function(e){return _.indexOf(n.changed,e.path)!=-1},change:function(e){n.changed.push(e.path)},unchange:function(e){_.remove(n.changed,function(n){return e.path==n})}},n.$watch("fileContent",function(n,e){o(function(){Prism.highlightAll()},0)}),l(),n.choose=function(e,t){console.log("choose"),t&&2==t.which?n.removeFromTab(e):(s(e),n.changingFuncs.unchange(e),_.find(n.openFiles,{path:e.path})||(n.openFiles.push(e),console.log("tabs",n.openFiles)))},n.removeFromTab=function(e){n.openFiles=_.reject(n.openFiles,{path:e.path}),n.currentFile.path==e.path&&(n.openFiles.length?n.choose(n.openFiles[0]):(n.currentFile={},n.syntax=""))},c.on("connected",function(){console.log("Connected!",c.obj.id)}),c.on("fschange",function(e){console.log("fschange",e),n.currentFile.path==e.path?(console.log(n.currentFile.path,e.path,n.currentFile.path==e.path),s(n.currentFile)):a(e.path,n.files)}),c.on("fsupdate",function(){l()})}]);
"use strict";angular.module("app.directives").directive("fileNavItem",["$recursion",function(e){function t(e,t,n){function r(t){for(var n=0;n<t.length;n++){var i=t[n];if(e.changing.isChanged(i))return!0;if("directory"==i.type){var a=r(i.files);if(a)return!0}}return!1}t.find(".name").on("click",function(){"directory"==e.data.type?(e.opening.toggle(e.data),e.$apply()):e.choose(e.data)}),e.containsChanged=function(){return"directory"==e.data.type&&r(e.data.files)}}return{restrict:"E",replace:!1,transclude:!1,templateUrl:"angular/directives/fileNavItem.html",compile:function(n){return e.compile(n,t)},scope:{data:"=",choose:"=",current:"=",opening:"=",changing:"="}}}]);
"use strict";angular.module("app.directives").directive("rand",["$recursion",function(n){function e(n,e,r){var c=parseInt(Math.random()*e.children().length);e.children().each(function(n,e){c!==n&&$(e).css("display","none")})}return{restrict:"E",replace:!1,transclude:!1,link:e}}]);
"use strict";angular.module("app.directives").directive("resizer",["$document",function(e){return function(r,s,i){function t(e){localStorage.setItem("sidebar-resizer-x",e),s.css({left:e+"px"}),$(i.resizerLeft).css({width:e+"px"}),$(i.resizerRight).css({left:e+parseInt(i.resizerWidth)+"px"})}function n(e){if("vertical"==i.resizer){var r=e.pageX;i.resizerMax&&r>i.resizerMax&&(r=parseInt(i.resizerMax)),i.resizerMin&&r<i.resizerMin&&(r=parseInt(i.resizerMin)),t(r)}else{var n=window.innerHeight-e.pageY;s.css({bottom:n+"px"}),$(i.resizerTop).css({bottom:n+parseInt(i.resizerHeight)+"px"}),$(i.resizerBottom).css({height:n+"px"})}}function o(){e.unbind("mousemove",n),e.unbind("mouseup",o)}console.log(r,s);var a=localStorage.getItem("sidebar-resizer-x");a&&t(a),s.on("mousedown",function(r){r.preventDefault(),e.on("mousemove",n),e.on("mouseup",o)})}}]);
"use strict";angular.module("app.services").factory("$config",function(){var o={};return o.socketPort=3e3,o.socketURL="http://"+location.hostname+":"+o.socketPort,console.log(o.socketURL),o});
"use strict";angular.module("app.services").factory("$loader",["$http",function(t){var e={files:[],getFile:function(e){var r=t.post("/api/file/",{path:e.path}).then(function(t){return files.push(t),t});return r}};return e}]);
"use strict";angular.module("app.services").factory("$recursion",["$compile",function(n){return{compile:function(e,o){angular.isFunction(o)&&(o={post:o});var r,t=e.contents().remove();return{pre:o&&o.pre?o.pre:null,post:function(e,p){r||(r=n(t)),r(e,function(n){p.append(n)}),o&&o.post&&o.post.apply(null,arguments)}}}}}]);
"use strict";angular.module("app.services").factory("$socket",["$rootScope","$config",function(n,o){var t=io.connect(o.socketURL),c={obj:t,on:function(o,c){t.on(o,function(){var o=arguments;n.$apply(function(){c.apply(t,o)})})},emit:function(o,c,i){t.emit(o,c,function(){var o=arguments;n.$apply(function(){i&&i.apply(t,o)})})}};return c}]);
"use strict";angular.module("app.services").factory("$syntax",function(){var s={css:"css",html:"markup",js:"javascript",php:"php",sql:"sql",md:"markdown",sh:"bash",styl:"stylus",scss:"sass",sass:"sass",less:"less",json:"javascript"},a=function(a){var n=a.split("."),t=n[n.length-1],r="language-none";return s[t]&&(r="language-"+s[t]),r};return a});
"use strict";angular.module("app.templates").run(["$templateCache",function(t){t.put("directives/fileNavItem.html",'<div class="file-nav-item">\n\t\n\t<span class="name" ng-class="{current: current.path == data.path, changed: changing.isChanged(data) || containsChanged()}">\n\t\t<span ng-show="data.type == \'directory\'">\n\t\t\t<span class="icon" ng-if="!opening.isOpen(data)"><i class="fa fa-folder"></i></span>\n\t\t\t<span class="icon" ng-if="opening.isOpen(data)"><i class="fa fa-folder-open"></i></span>\n\t\t</span>\n\t\t<span class="icon" ng-if="data.type == \'file\'">\n\t\t\t<i class="fa fa-file-o"></i>\n\t\t</span>\n\t\t{{ data.name }}\n\t</span>\n\n\t<ul ng-show="data.type == \'directory\' && opening.isOpen(data)">\n\t\t<li ng-repeat="file in data.files" ng-class="{file: file.type == \'file\', directory: file.type == \'directory\'}">\n\t\t\t<file-nav-item data="file" choose="choose" current="current" opening="opening" changing="changing" />\n\t\t</li>\n\t</ul>\n</div>'),t.put("views/main.html",'<div class="wrapper" layout="full-col">\n\n\t<div layout="row" ratio="1">\n\t\t<ul class="file-nav" id="nav">\n\t\t\t<li ng-repeat="file in files" ng-class="{file: file.type == \'file\', directory: file.type == \'directory\'}">\n\t\t\t\t<file-nav-item data="file" choose="choose" current="currentFile" opening="openingFuncs" changing="changingFuncs" />\n\t\t\t</li>\n\t\t</ul>\n\t\t\n\t\t<div class="content" id="content" ratio="1" layout="col">\n\t\t\t<div ratio="1" layout="col" class="code-panel">\n\t\t\t\t<div class="tabs">\n\t\t\t\t\t<div class="tab" ng-repeat="file in openFiles" ng-click="choose(file, $event)" ng-class="{current: currentFile.path == file.path, changed: changingFuncs.isChanged(file)}" ratio="1" layout="row" align="center">\n\t\t\t\t\t\t<span class="filename">\n\t\t\t\t\t\t\t{{ file.name }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<button class="close-btn" ng-click="removeFromTab(file)">\n\t\t\t\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ng-show="syntax && !currentFile.imageurl">\n\t\t\t\t\t<pre ratio="1" class="{{ syntax }} line-numbers"><code class="{{ syntax }}" ng-bind="fileContent"></code></pre>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div ng-show="!syntax && !currentFile.imageurl" layout="col" justify="center" align="center" ratio="1" class="no-file-chosen">\n\t\t\t\t\t<rand>\n\t\t\t\t\t\t<span>&lt; &gt;</span>\n\t\t\t\t\t\t<span>{ }</span>\n\t\t\t\t\t\t<span>[ ]</span>\n\t\t\t\t\t\t<span>( )</span>\n\t\t\t\t\t</rand>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div ng-show="!syntax && currentFile.imageurl" layout="col" justify="center" align="center" ratio="1">\n\t\t\t\t\t<img ng-src="{{currentFile.imageurl}}" alt="">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t</div>\n\n\t\t<div id="sidebar-resizer" \n\t\t\tresizer="vertical" \n\t\t\tresizer-width="6" \n\t\t\tresizer-left="#nav" \n\t\t\tresizer-right="#content"\n\t\t\tresizer-max="400"\n\t\t\tresizer-min="100">\n\t\t</div>\n\t</div>\n</div>')}]);